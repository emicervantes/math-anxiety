% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\KOMAoption{captions}{tableheading}
\makeatletter
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\makeatother
\makeatletter
\@ifundefined{shadecolor}{\definecolor{shadecolor}{rgb}{.97, .97, .97}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Modeling 2},
  pdfauthor={Emi Cervantes},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{Modeling 2}
\author{Emi Cervantes}
\date{}

\begin{document}
\maketitle
\ifdefined\Shaded\renewenvironment{Shaded}{\begin{tcolorbox}[boxrule=0pt, interior hidden, frame hidden, borderline west={3pt}{0pt}{shadecolor}, sharp corners, enhanced, breakable]}{\end{tcolorbox}}\fi

\hypertarget{modeling-part-2-structural-equation-modeling---path-analysis}{%
\section{Modeling Part 2: Structural Equation Modeling - Path
Analysis}\label{modeling-part-2-structural-equation-modeling---path-analysis}}

\emph{Structural Equation Modeling} is a linear model framework that
models both simultaneous regression equations with latent variables.

\hypertarget{load-libraries}{%
\section{Load Libraries}\label{load-libraries}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --
v dplyr     1.1.2     v readr     2.1.4
v forcats   1.0.0     v stringr   1.5.0
v ggplot2   3.4.2     v tibble    3.2.1
v lubridate 1.9.2     v tidyr     1.3.0
v purrr     1.0.1     
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
i Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(lavaan)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
This is lavaan 0.6-15
lavaan is FREE software! Please report any bugs.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(semPlot)}
\FunctionTok{library}\NormalTok{(semptools)}
\FunctionTok{library}\NormalTok{(report)}
\FunctionTok{library}\NormalTok{ (semTable)}
\end{Highlighting}
\end{Shaded}

\hypertarget{load-dataset}{%
\section{Load Dataset}\label{load-dataset}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}}\NormalTok{ readxl}\SpecialCharTok{::}\FunctionTok{read\_xlsx}\NormalTok{(}\StringTok{\textquotesingle{}../../../data/math{-}anxiety{-}raw{-}data.xlsx\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
New names:
* `Subject ID #` -> `Subject ID #...8`
* `Subject ID #` -> `Subject ID #...9`
* `StartDate` -> `StartDate...11`
* `EndDate` -> `EndDate...12`
* `Progress` -> `Progress...13`
* `Duration (in seconds)` -> `Duration (in seconds)...17`
* `Finished` -> `Finished...18`
* `RecordedDate` -> `RecordedDate...19`
* `Browser_info_Browser` -> `Browser_info_Browser...20`
* `Browser_info_Version` -> `Browser_info_Version...21`
* `Browser_info_Operating System` -> `Browser_info_Operating System...22`
* `Browser_info_Resolution` -> `Browser_info_Resolution...23`
* `Misc_0` -> `Misc_0...36`
* `Misc_1` -> `Misc_1...100`
* `Misc_2` -> `Misc_2...145`
* `MW_control_1` -> `MW_control_1...210`
* `MW_control_2` -> `MW_control_2...211`
* `MW_control_3` -> `MW_control_3...212`
* `MW_control_4` -> `MW_control_4...213`
* `MW_control_5` -> `MW_control_5...214`
* `` -> `...219`
* `StartDate` -> `StartDate...221`
* `EndDate` -> `EndDate...222`
* `Progress` -> `Progress...223`
* `Duration (in seconds)` -> `Duration (in seconds)...224`
* `Finished` -> `Finished...225`
* `RecordedDate` -> `RecordedDate...226`
* `Browser_info_Browser` -> `Browser_info_Browser...227`
* `Browser_info_Version` -> `Browser_info_Version...228`
* `Browser_info_Operating System` -> `Browser_info_Operating System...229`
* `Browser_info_Resolution` -> `Browser_info_Resolution...230`
* `Misc_0` -> `Misc_0...232`
* `Misc_1` -> `Misc_1...239`
* `Misc_2` -> `Misc_2...290`
* `MW_control_1` -> `MW_control_1...295`
* `MW_control_2` -> `MW_control_2...296`
* `MW_control_3` -> `MW_control_3...297`
* `MW_control_4` -> `MW_control_4...298`
* `MW_control_5` -> `MW_control_5...299`
\end{verbatim}

\hypertarget{clean-dataset}{%
\subsection{Clean Dataset}\label{clean-dataset}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tma\_lst }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"TMA\_1"}\NormalTok{, }\StringTok{"TMA\_2"}\NormalTok{, }\StringTok{"TMA\_3"}\NormalTok{,}\StringTok{"TMA\_4"}\NormalTok{, }\StringTok{"TMA\_5"}\NormalTok{, }\StringTok{"TMA\_6"}\NormalTok{,}
             \StringTok{"TMA\_sum"}\NormalTok{, }\StringTok{"TMA\_avg"}\NormalTok{)}
\NormalTok{df1 }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(Condition, Sex, chicago, nonwhite, pretest,}
\NormalTok{              MW\_day1\_avg, MW\_day2\_avg, SI\_avg, tma\_lst,}
\NormalTok{              Understand\_avg, Del\_OverallAcc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
i Please use `all_of()` or `any_of()` instead.
  # Was:
  data %>% select(tma_lst)

  # Now:
  data %>% select(all_of(tma_lst))

See <https://tidyselect.r-lib.org/reference/faq-external-vector.html>.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Get rid of row that has NA values in Condition and/or Sex}
\NormalTok{df1 }\OtherTok{\textless{}{-}}\NormalTok{ df1 }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(Condition }\SpecialCharTok{==} \DecValTok{1} \SpecialCharTok{|}\NormalTok{ Condition }\SpecialCharTok{==} \DecValTok{2}\NormalTok{)}
\NormalTok{df1 }\OtherTok{\textless{}{-}}\NormalTok{ df1 }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(Sex))}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{Condition[df1}\SpecialCharTok{$}\NormalTok{Condition }\SpecialCharTok{==} \DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{0}
\CommentTok{\# Assign 0 for "boy" and 1 for "girl"}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{Sex[df1}\SpecialCharTok{$}\NormalTok{Sex }\SpecialCharTok{==} \DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{Sex[df1}\SpecialCharTok{$}\NormalTok{Sex }\SpecialCharTok{==} \DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{1}
\CommentTok{\# Make sure variable is categorical}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{chicago }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(df1}\SpecialCharTok{$}\NormalTok{chicago)}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{Sex }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(df1}\SpecialCharTok{$}\NormalTok{Sex)}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{nonwhite }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(df1}\SpecialCharTok{$}\NormalTok{nonwhite)}
\NormalTok{df1}\SpecialCharTok{$}\NormalTok{Condition }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(df1}\SpecialCharTok{$}\NormalTok{Condition)}
\end{Highlighting}
\end{Shaded}

\hypertarget{structural-equation-model}{%
\section{Structural Equation Model}\label{structural-equation-model}}

We will be observing 6 latent variables:

\begin{itemize}
\tightlist
\item
  \emph{Academic Preparation}
\item
  \emph{Sociocultural status}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m1 }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}}
\StringTok{\# measurement model}
\StringTok{prep =\textasciitilde{} chicago + pretest}
\StringTok{socio\_status =\textasciitilde{} Sex}
\StringTok{tma =\textasciitilde{} TMA\_avg}
\StringTok{mw =\textasciitilde{} MW\_day1\_avg + MW\_day2\_avg}
\StringTok{si =\textasciitilde{} SI\_avg}
\StringTok{achievement =\textasciitilde{} Del\_OverallAcc + Understand\_avg}
\StringTok{\# regression}
\StringTok{tma \textasciitilde{} mw + si + prep + socio\_status}
\StringTok{achievement \textasciitilde{} tma + prep + socio\_status}
\StringTok{\textquotesingle{}}
\NormalTok{fit1 }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m1, }\AttributeTok{data =}\NormalTok{ df1,}
            \AttributeTok{ordered =} \FunctionTok{c}\NormalTok{(}\StringTok{"Condition"}\NormalTok{, }\StringTok{"Sex"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in lav_data_full(data = data, group = group, cluster = cluster, : lavaan
WARNING: some observed variances are (at least) a factor 1000 times larger than
others; use varTable(fit) to investigate
\end{verbatim}

\begin{verbatim}
Warning in muthen1984(Data = X[[g]], wt = WT[[g]], ov.names = ov.names[[g]], :
lavaan WARNING: trouble constructing W matrix; used generalized inverse for A11
submatrix
\end{verbatim}

\begin{verbatim}
Warning in lavaan::lavaan(model = m1, data = df1, ordered = c("Condition", : lavaan WARNING:
    the optimizer warns that a solution has NOT been found!
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit1,}\AttributeTok{standardized=}\ConstantTok{TRUE}\NormalTok{, }\AttributeTok{fit.measures=}\ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in lav_object_summary(object = object, header = header, fit.measures = fit.measures, : lavaan WARNING: fit measures not available if model did not converge
\end{verbatim}

\begin{verbatim}
lavaan 0.6.15 did NOT end normally after 141 iterations
** WARNING ** Estimates below are most likely unreliable

  Estimator                                       DWLS
  Optimization method                           NLMINB
  Number of model parameters                        37

                                                  Used       Total
  Number of observations                           222         229


Parameter Estimates:

  Standard errors                           Robust.sem
  Information                                 Expected
  Information saturated (h1) model        Unstructured

Latent Variables:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
  prep =~                                                          
    chicago           1.000                                      NA
    pretest           0.011       NA                             NA
  socio_status =~                                                  
    Sex               1.000                                      NA
  tma =~                                                           
    TMA_avg           1.000                                   0.319
  mw =~                                                            
    MW_day1_avg       1.000                                   0.288
    MW_day2_avg       0.112       NA                          0.032
  si =~                                                            
    SI_avg            1.000                                      NA
  achievement =~                                                   
    Del_OverallAcc    1.000                                   1.287
    Understand_avg   16.163       NA                         20.800
  Std.all    
             
           NA
           NA
             
           NA
             
        1.000
             
        0.293
        0.033
             
           NA
             
        5.615
        0.936

Regressions:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
  tma ~                                                            
    mw               -0.469       NA                         -0.424
    si                0.080       NA                             NA
    prep             -0.021       NA                             NA
    socio_status      0.213       NA                             NA
  achievement ~                                                    
    tma               2.282       NA                          0.565
    prep              0.017       NA                             NA
    socio_status     -0.406       NA                             NA
  Std.all    
             
       -0.424
           NA
           NA
           NA
             
        0.565
           NA
           NA

Covariances:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
  prep ~~                                                          
    socio_status     -0.116       NA                         -0.026
    mw                0.165       NA                          0.277
    si                0.081       NA                     184214.215
  socio_status ~~                                                  
    mw               -0.071       NA                         -0.112
    si               -0.481       NA                   -1038679.552
  mw ~~                                                            
    si               -0.208       NA                   -3407333.497
  Std.all    
             
       -0.026
        0.277
   184214.215
             
       -0.112
 -1038679.552
             
 -3407333.497

Intercepts:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
   .chicago           0.219       NA                          0.219
   .pretest           0.651       NA                          0.651
   .Sex               0.000                                   0.000
   .TMA_avg           2.037       NA                          2.037
   .MW_day1_avg       2.172       NA                          2.172
   .MW_day2_avg       1.978       NA                          1.978
   .SI_avg            3.546       NA                          3.546
   .Del_OverallAcc    0.610       NA                          0.610
   .Understand_avg   29.784       NA                         29.784
    prep              0.000                                      NA
    socio_status      0.000                                      NA
   .tma               0.000                                   0.000
    mw                0.000                                   0.000
    si                0.000                                      NA
   .achievement       0.000                                   0.000
  Std.all    
        0.522
        1.347
        0.000
        6.390
        2.210
        2.010
           NA
        2.663
        1.340
           NA
           NA
        0.000
        0.000
           NA
        0.000

Thresholds:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
    Sex|t1           -0.156       NA                         -0.156
  Std.all    
       -0.156

Variances:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
   .chicago           4.457       NA                          4.457
   .pretest           0.234       NA                          0.234
   .Sex               5.778                                   5.778
   .TMA_avg           0.000                                   0.000
   .MW_day1_avg       0.883       NA                          0.883
   .MW_day2_avg       0.968       NA                          0.968
   .SI_avg            0.000                                   0.000
   .Del_OverallAcc   -1.604       NA                         -1.604
   .Understand_avg   61.059       NA                         61.059
    prep             -4.282       NA                             NA
    socio_status     -4.778       NA                             NA
   .tma               0.285       NA                          2.805
    mw                0.083       NA                          1.000
    si               -0.000       NA                             NA
   .achievement       0.022       NA                          0.013
  Std.all    
       25.474
        1.002
        5.778
        0.000
        0.914
        0.999
       -0.000
      -30.531
        0.124
           NA
           NA
        2.805
        1.000
           NA
        0.013

Scales y*:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv    
    Sex               1.000                                   1.000
  Std.all    
        1.000
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{parameterEstimates}\NormalTok{(fit1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
              lhs  op            rhs    est se  z pvalue ci.lower ci.upper
1            prep  =~        chicago  1.000  0 NA     NA    1.000    1.000
2            prep  =~        pretest  0.011 NA NA     NA       NA       NA
3    socio_status  =~            Sex  1.000  0 NA     NA    1.000    1.000
4             tma  =~        TMA_avg  1.000  0 NA     NA    1.000    1.000
5              mw  =~    MW_day1_avg  1.000  0 NA     NA    1.000    1.000
6              mw  =~    MW_day2_avg  0.112 NA NA     NA       NA       NA
7              si  =~         SI_avg  1.000  0 NA     NA    1.000    1.000
8     achievement  =~ Del_OverallAcc  1.000  0 NA     NA    1.000    1.000
9     achievement  =~ Understand_avg 16.163 NA NA     NA       NA       NA
10            tma   ~             mw -0.469 NA NA     NA       NA       NA
11            tma   ~             si  0.080 NA NA     NA       NA       NA
12            tma   ~           prep -0.021 NA NA     NA       NA       NA
13            tma   ~   socio_status  0.213 NA NA     NA       NA       NA
14    achievement   ~            tma  2.282 NA NA     NA       NA       NA
15    achievement   ~           prep  0.017 NA NA     NA       NA       NA
16    achievement   ~   socio_status -0.406 NA NA     NA       NA       NA
17            Sex   |             t1 -0.156 NA NA     NA       NA       NA
18        chicago  ~~        chicago  4.457 NA NA     NA       NA       NA
19        pretest  ~~        pretest  0.234 NA NA     NA       NA       NA
20            Sex  ~~            Sex  5.778  0 NA     NA    5.778    5.778
21        TMA_avg  ~~        TMA_avg  0.000  0 NA     NA    0.000    0.000
22    MW_day1_avg  ~~    MW_day1_avg  0.883 NA NA     NA       NA       NA
23    MW_day2_avg  ~~    MW_day2_avg  0.968 NA NA     NA       NA       NA
24         SI_avg  ~~         SI_avg  0.000  0 NA     NA    0.000    0.000
25 Del_OverallAcc  ~~ Del_OverallAcc -1.604 NA NA     NA       NA       NA
26 Understand_avg  ~~ Understand_avg 61.059 NA NA     NA       NA       NA
27           prep  ~~           prep -4.282 NA NA     NA       NA       NA
28   socio_status  ~~   socio_status -4.778 NA NA     NA       NA       NA
29            tma  ~~            tma  0.285 NA NA     NA       NA       NA
30             mw  ~~             mw  0.083 NA NA     NA       NA       NA
31             si  ~~             si  0.000 NA NA     NA       NA       NA
32    achievement  ~~    achievement  0.022 NA NA     NA       NA       NA
33           prep  ~~   socio_status -0.116 NA NA     NA       NA       NA
34           prep  ~~             mw  0.165 NA NA     NA       NA       NA
35           prep  ~~             si  0.081 NA NA     NA       NA       NA
36   socio_status  ~~             mw -0.071 NA NA     NA       NA       NA
37   socio_status  ~~             si -0.481 NA NA     NA       NA       NA
38             mw  ~~             si -0.208 NA NA     NA       NA       NA
39            Sex ~*~            Sex  1.000  0 NA     NA    1.000    1.000
40        chicago  ~1                 0.219 NA NA     NA       NA       NA
41        pretest  ~1                 0.651 NA NA     NA       NA       NA
42            Sex  ~1                 0.000  0 NA     NA    0.000    0.000
43        TMA_avg  ~1                 2.037 NA NA     NA       NA       NA
44    MW_day1_avg  ~1                 2.172 NA NA     NA       NA       NA
45    MW_day2_avg  ~1                 1.978 NA NA     NA       NA       NA
46         SI_avg  ~1                 3.546 NA NA     NA       NA       NA
47 Del_OverallAcc  ~1                 0.610 NA NA     NA       NA       NA
48 Understand_avg  ~1                29.784 NA NA     NA       NA       NA
49           prep  ~1                 0.000  0 NA     NA    0.000    0.000
50   socio_status  ~1                 0.000  0 NA     NA    0.000    0.000
51            tma  ~1                 0.000  0 NA     NA    0.000    0.000
52             mw  ~1                 0.000  0 NA     NA    0.000    0.000
53             si  ~1                 0.000  0 NA     NA    0.000    0.000
54    achievement  ~1                 0.000  0 NA     NA    0.000    0.000
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{semPaths}\NormalTok{(fit1,}
           \AttributeTok{whatLabels =} \StringTok{"est"}\NormalTok{,}
           \AttributeTok{sizeMan =} \DecValTok{10}\NormalTok{,}
           \AttributeTok{edge.label.cex =} \FloatTok{1.15}\NormalTok{,}
           \AttributeTok{style =} \StringTok{"ram"}\NormalTok{,}
           \AttributeTok{nCharNodes =} \DecValTok{0}\NormalTok{, }\AttributeTok{nCharEdges =} \DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \includegraphics{modeling2_files/figure-pdf/unnamed-chunk-5-1.pdf}

}

\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Path analysis}
\NormalTok{m2 }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}}
\StringTok{  TMA\_avg \textasciitilde{} 1 + Sex + chicago + MW\_day2\_avg + SI\_avg}
\StringTok{  Del\_OverallAcc \textasciitilde{} 1 + TMA\_avg + chicago + Sex}
\StringTok{\textquotesingle{}}
\NormalTok{fit2 }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m2, }\AttributeTok{data =}\NormalTok{ df1,}
             \AttributeTok{ordered =} \FunctionTok{c}\NormalTok{(}\StringTok{"Condition"}\NormalTok{, }\StringTok{"Sex"}\NormalTok{), }\AttributeTok{group =} \StringTok{"Condition"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in lav_data_full(data = data, group = group, cluster = cluster, : lavaan
WARNING: exogenous variable(s) declared as ordered in data: Sex
\end{verbatim}

\begin{verbatim}
Warning in lav_partable_check(lavpartable, categorical =
lavoptions$.categorical, : lavaan WARNING: parameter table does not contain
thresholds

Warning in lav_partable_check(lavpartable, categorical =
lavoptions$.categorical, : lavaan WARNING: parameter table does not contain
thresholds
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
lavaan 0.6.15 ended normally after 37 iterations

  Estimator                                       DWLS
  Optimization method                           NLMINB
  Number of model parameters                        22

  Number of observations per group:                   
    1                                              118
    0                                              111

Model Test User Model:
                                              Standard      Scaled
  Test Statistic                                 6.591       6.708
  Degrees of freedom                                 4           4
  P-value (Chi-square)                           0.159       0.152
  Scaling correction factor                                  1.006
  Shift parameter                                            0.153
    simple second-order correction                                
  Test statistic for each group:
    1                                            3.781       3.839
    0                                            2.810       2.869

Parameter Estimates:

  Standard errors                           Robust.sem
  Information                                 Expected
  Information saturated (h1) model        Unstructured


Group 1 [1]:

Regressions:
                   Estimate  Std.Err  z-value  P(>|z|)
  TMA_avg ~                                           
    Sex               0.049    0.138    0.356    0.722
    chicago           0.014    0.194    0.071    0.943
    MW_day2_avg       0.153    0.114    1.342    0.180
    SI_avg           -0.088    0.093   -0.942    0.346
  Del_OverallAcc ~                                    
    TMA_avg           0.009    0.023    0.387    0.699
    chicago          -0.251    0.051   -4.961    0.000
    Sex              -0.035    0.037   -0.950    0.342

Intercepts:
                   Estimate  Std.Err  z-value  P(>|z|)
   .TMA_avg           2.046    0.433    4.725    0.000
   .Del_OverallAcc    0.511    0.120    4.250    0.000

Variances:
                   Estimate  Std.Err  z-value  P(>|z|)
   .TMA_avg           0.559    0.106    5.287    0.000
   .Del_OverallAcc    0.037    0.004    8.672    0.000


Group 2 [0]:

Regressions:
                   Estimate  Std.Err  z-value  P(>|z|)
  TMA_avg ~                                           
    Sex               0.110    0.135    0.812    0.417
    chicago          -0.230    0.126   -1.829    0.067
    MW_day2_avg       0.338    0.073    4.637    0.000
    SI_avg           -0.219    0.084   -2.616    0.009
  Del_OverallAcc ~                                    
    TMA_avg          -0.105    0.021   -4.901    0.000
    chicago          -0.246    0.048   -5.091    0.000
    Sex              -0.027    0.039   -0.685    0.494

Intercepts:
                   Estimate  Std.Err  z-value  P(>|z|)
   .TMA_avg           2.249    0.382    5.893    0.000
   .Del_OverallAcc    0.988    0.116    8.512    0.000

Variances:
                   Estimate  Std.Err  z-value  P(>|z|)
   .TMA_avg           0.451    0.068    6.606    0.000
   .Del_OverallAcc    0.037    0.004    8.532    0.000
\end{verbatim}

\hypertarget{subgroup-analysis-path-analysis}{%
\subsection{Subgroup Analysis + Path
Analysis}\label{subgroup-analysis-path-analysis}}

We will split the data into two subgroups based on sites: Chicago and
Irvine

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Split data by sites}
\CommentTok{\# chicago data}
\NormalTok{df\_i }\OtherTok{\textless{}{-}}\NormalTok{ df1 }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(chicago }\SpecialCharTok{==} \DecValTok{1}\NormalTok{)}
\CommentTok{\# irvine data}
\NormalTok{df\_c }\OtherTok{\textless{}{-}}\NormalTok{ df1 }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(chicago }\SpecialCharTok{==} \DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now we have 2 new dataframes:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \texttt{df\_c}: Chicago
\item
  \texttt{df\_i}: Irvine
\end{enumerate}

For each model, we will fit a path analysis model and will output two
different results, path analysis for girls and path analysis for boys.
The path analysis model for each data is defined as follow:

\texttt{TMA\_avg\ \textasciitilde{}\ 1\ +\ SI\_avg\ +\ MW\_day2\_avg\ +\ Condition}

\texttt{Del\_OvereallAcc\ \textasciitilde{}\ 1\ +\ TMA\_avg\ +\ Condition}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# model definition}
\NormalTok{m }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}}
\StringTok{  TMA\_avg \textasciitilde{} 1 + MW\_day2\_avg + SI\_avg + Condition}
\StringTok{  Del\_OverallAcc \textasciitilde{} 1 + TMA\_avg + Condition}
\StringTok{\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{chicago-data}{%
\subsubsection{Chicago Data}\label{chicago-data}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# free model}
\NormalTok{fit\_c }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m, }\AttributeTok{data =}\NormalTok{ df\_c, }\AttributeTok{group =} \StringTok{"Sex"}\NormalTok{)}
\CommentTok{\# constrained model}
\NormalTok{fit\_c\_c }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m, }\AttributeTok{data =}\NormalTok{ df\_c, }\AttributeTok{group =} \StringTok{"Sex"}\NormalTok{,}
                \AttributeTok{group.equal =} \FunctionTok{c}\NormalTok{(}\StringTok{"intercepts"}\NormalTok{, }\StringTok{"regressions"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# check if the constrained and free models are significantly diff}
\FunctionTok{anova}\NormalTok{(fit\_c, fit\_c\_c)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Chi-Squared Difference Test

        Df    AIC    BIC   Chisq Chisq diff   RMSEA Df diff Pr(>Chisq)  
fit_c    4 337.15 394.42  7.8035                                        
fit_c_c 11 336.97 371.97 21.6252     13.822 0.10464       7    0.05444 .
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

\hypertarget{irvine-data}{%
\subsubsection{Irvine Data}\label{irvine-data}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# free model}
\NormalTok{fit\_i }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m, }\AttributeTok{data =}\NormalTok{ df\_i, }\AttributeTok{group =} \StringTok{"Sex"}\NormalTok{)}
\CommentTok{\# constrained model}
\NormalTok{fit\_i\_c }\OtherTok{\textless{}{-}} \FunctionTok{sem}\NormalTok{(m, }\AttributeTok{data =}\NormalTok{ df\_i, }\AttributeTok{group =} \StringTok{"Sex"}\NormalTok{,}
                \AttributeTok{group.equal =} \FunctionTok{c}\NormalTok{(}\StringTok{"intercepts"}\NormalTok{, }\StringTok{"regressions"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# check if the constrained and free models are significantly diff}
\FunctionTok{anova}\NormalTok{(fit\_i, fit\_i\_c)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Chi-Squared Difference Test

        Df    AIC    BIC   Chisq Chisq diff RMSEA Df diff Pr(>Chisq)
fit_i    4 110.29 145.06  3.8558                                    
fit_i_c 11 102.89 124.14 10.4521     6.5963     0       7     0.4721
\end{verbatim}

\hypertarget{visualize-results}{%
\subsubsection{Visualize Results}\label{visualize-results}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Chicago}
\FunctionTok{semPaths}\NormalTok{(fit\_c,}
         \AttributeTok{whatLabels =} \StringTok{"est"}\NormalTok{,}
         \AttributeTok{sizeMan =} \DecValTok{10}\NormalTok{,}
         \AttributeTok{edge.label.cex =} \FloatTok{1.15}\NormalTok{,}
         \AttributeTok{style =} \StringTok{"ram"}\NormalTok{,}
         \AttributeTok{nCharNodes =} \DecValTok{0}\NormalTok{, }\AttributeTok{nCharEdges =} \DecValTok{0}\NormalTok{,}
         \AttributeTok{nodeLabels =} \FunctionTok{c}\NormalTok{(}\StringTok{"Math}\SpecialCharTok{\textbackslash{}n}\StringTok{Anxiety"}\NormalTok{, }\StringTok{"Accuracy"}\NormalTok{,}
                        \StringTok{"MW"}\NormalTok{,}\StringTok{"SI"}\NormalTok{, }\StringTok{"Condition"}\NormalTok{),}
         \AttributeTok{intercepts =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \includegraphics{modeling2_files/figure-pdf/unnamed-chunk-13-1.pdf}

}

\end{figure}

\begin{figure}[H]

{\centering \includegraphics{modeling2_files/figure-pdf/unnamed-chunk-13-2.pdf}

}

\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Irvine}
\FunctionTok{semPaths}\NormalTok{(fit\_i,}
         \AttributeTok{whatLabels =} \StringTok{"est"}\NormalTok{,}
         \AttributeTok{sizeMan =} \DecValTok{10}\NormalTok{,}
         \AttributeTok{edge.label.cex =} \FloatTok{1.15}\NormalTok{,}
         \AttributeTok{style =} \StringTok{"ram"}\NormalTok{,}
         \AttributeTok{nCharNodes =} \DecValTok{0}\NormalTok{, }\AttributeTok{nCharEdges =} \DecValTok{0}\NormalTok{,}
         \AttributeTok{nodeLabels =} \FunctionTok{c}\NormalTok{(}\StringTok{"Math}\SpecialCharTok{\textbackslash{}n}\StringTok{Anxiety"}\NormalTok{, }\StringTok{"Accuracy"}\NormalTok{,}
                        \StringTok{"MW"}\NormalTok{,}\StringTok{"SI"}\NormalTok{, }\StringTok{"Condition"}\NormalTok{),}
         \AttributeTok{intercepts =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \includegraphics{modeling2_files/figure-pdf/unnamed-chunk-13-3.pdf}

}

\end{figure}

\begin{figure}[H]

{\centering \includegraphics{modeling2_files/figure-pdf/unnamed-chunk-13-4.pdf}

}

\end{figure}

\hypertarget{results}{%
\subsection{Results}\label{results}}

\begin{itemize}
\item
  No significant different was found in model between boys and girls in
  both Chicago and Irvine (Chicago had a close p-value)
\item
  Chicago:
\end{itemize}

\begin{verbatim}
-   Condition had similar effects on both math anxiety and accuracy

-   Effects of mind wandering and situational interests seemed to be different by a lot more

    -   Girls: MW 0.13, SI -0.21 (direct effect on math anxiety)

    -   Boys: MW 0.43, SI -0.05 (direct effect on math anxiety) -\> Possible that boys were less likely to pay attention during the video lessons and resulted in higher math anxiety (explained by the density plot)

-   Condition had somewhat a different effect on accuracy

    -   Girls: Condition 0.06

    -   Boys: Condition: -0.03
\end{verbatim}

\begin{itemize}
\item
  Irvine:

  \begin{itemize}
  \item
    Similar effect by math anxiety on accuracy, and Condition both had
    positive effects on math anxiety

    \begin{itemize}
    \item
      Girls: Condition 0.40 (direct effect on math anxiety)
    \item
      Boys: Condition 0.27 (direct effect on math anxiety)
    \end{itemize}
  \item
    Effect on situational interest on math anxiety was very similar
    among genders, but mind wandering was again different

    \begin{itemize}
    \item
      Girls: MW 0.20 (direct effect on math anxiety)
    \item
      Boys: MW 0.08 (direct effect on math anxiety)
    \item
      This time, girls had a greater effect by mind wandering than boys
    \end{itemize}
  \item
    Condition had an opposite effect on accuracy

    \begin{itemize}
    \item
      Girls: Condition -0.08 (direct effect on accuracy)
    \item
      Boys: Condition 0.14 (direct effect on accuracy)
    \end{itemize}
  \end{itemize}
\end{itemize}



\end{document}
