<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emi Cervantes">

<title>Modeling 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="modeling1_files/libs/clipboard/clipboard.min.js"></script>
<script src="modeling1_files/libs/quarto-html/quarto.js"></script>
<script src="modeling1_files/libs/quarto-html/popper.min.js"></script>
<script src="modeling1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="modeling1_files/libs/quarto-html/anchor.min.js"></script>
<link href="modeling1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="modeling1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="modeling1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="modeling1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="modeling1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Modeling 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emi Cervantes </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="modeling-part-1" class="level1">
<h1>Modeling Part 1</h1>
<p>We will be fitting different statistical models and running statistical tests to examine the effectiveness of worked examples on mathematical anxiety and learning achievements. Particularly, we are interested in looking at the gender differences in the effects of worked example.</p>
<p>We will be using following statistical methods:</p>
<ul>
<li>Risk ratio</li>
<li>Multiple ANOVA test</li>
<li>Linear model and linear mixed-effect model</li>
</ul>
<section id="load-libraries" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries">Load Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
âœ” dplyr     1.1.2     âœ” readr     2.1.4
âœ” forcats   1.0.0     âœ” stringr   1.5.0
âœ” ggplot2   3.4.2     âœ” tibble    3.2.1
âœ” lubridate 1.9.2     âœ” tidyr     1.3.0
âœ” purrr     1.0.1     
â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
âœ– dplyr::filter() masks stats::filter()
âœ– dplyr::lag()    masks stats::lag()
â„¹ Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epitools)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Matrix

Attaching package: 'Matrix'

The following objects are masked from 'package:tidyr':

    expand, pack, unpack</code></pre>
</div>
</div>
</section>
<section id="load-dataset" class="level2">
<h2 class="anchored" data-anchor-id="load-dataset">Load Dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(<span class="st">'../../../data/math-anxiety-raw-data.xlsx'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
â€¢ `Subject ID #` -&gt; `Subject ID #...8`
â€¢ `Subject ID #` -&gt; `Subject ID #...9`
â€¢ `StartDate` -&gt; `StartDate...11`
â€¢ `EndDate` -&gt; `EndDate...12`
â€¢ `Progress` -&gt; `Progress...13`
â€¢ `Duration (in seconds)` -&gt; `Duration (in seconds)...17`
â€¢ `Finished` -&gt; `Finished...18`
â€¢ `RecordedDate` -&gt; `RecordedDate...19`
â€¢ `Browser_info_Browser` -&gt; `Browser_info_Browser...20`
â€¢ `Browser_info_Version` -&gt; `Browser_info_Version...21`
â€¢ `Browser_info_Operating System` -&gt; `Browser_info_Operating System...22`
â€¢ `Browser_info_Resolution` -&gt; `Browser_info_Resolution...23`
â€¢ `Misc_0` -&gt; `Misc_0...36`
â€¢ `Misc_1` -&gt; `Misc_1...100`
â€¢ `Misc_2` -&gt; `Misc_2...145`
â€¢ `MW_control_1` -&gt; `MW_control_1...210`
â€¢ `MW_control_2` -&gt; `MW_control_2...211`
â€¢ `MW_control_3` -&gt; `MW_control_3...212`
â€¢ `MW_control_4` -&gt; `MW_control_4...213`
â€¢ `MW_control_5` -&gt; `MW_control_5...214`
â€¢ `` -&gt; `...219`
â€¢ `StartDate` -&gt; `StartDate...221`
â€¢ `EndDate` -&gt; `EndDate...222`
â€¢ `Progress` -&gt; `Progress...223`
â€¢ `Duration (in seconds)` -&gt; `Duration (in seconds)...224`
â€¢ `Finished` -&gt; `Finished...225`
â€¢ `RecordedDate` -&gt; `RecordedDate...226`
â€¢ `Browser_info_Browser` -&gt; `Browser_info_Browser...227`
â€¢ `Browser_info_Version` -&gt; `Browser_info_Version...228`
â€¢ `Browser_info_Operating System` -&gt; `Browser_info_Operating System...229`
â€¢ `Browser_info_Resolution` -&gt; `Browser_info_Resolution...230`
â€¢ `Misc_0` -&gt; `Misc_0...232`
â€¢ `Misc_1` -&gt; `Misc_1...239`
â€¢ `Misc_2` -&gt; `Misc_2...290`
â€¢ `MW_control_1` -&gt; `MW_control_1...295`
â€¢ `MW_control_2` -&gt; `MW_control_2...296`
â€¢ `MW_control_3` -&gt; `MW_control_3...297`
â€¢ `MW_control_4` -&gt; `MW_control_4...298`
â€¢ `MW_control_5` -&gt; `MW_control_5...299`</code></pre>
</div>
</div>
</section>
<section id="clean-data" class="level2">
<h2 class="anchored" data-anchor-id="clean-data">Clean Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tma_lst <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"TMA_1"</span>, <span class="st">"TMA_2"</span>, <span class="st">"TMA_3"</span>,<span class="st">"TMA_4"</span>, <span class="st">"TMA_5"</span>, <span class="st">"TMA_6"</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"TMA_avg"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(Condition, Sex, chicago, race_rv, pretest,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>              MW_day1_avg, MW_day2_avg, SI_avg, tma_lst,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>              Understand_avg, Del_OverallAcc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
â„¹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(tma_lst)

  # Now:
  data %&gt;% select(all_of(tma_lst))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get rid of row that has NA values in Condition and/or Sex</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Condition <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> Condition <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sex))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>Condition[df1<span class="sc">$</span>Condition <span class="sc">==</span> <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign 0 for "boy" and 1 for "girl"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>Sex[df1<span class="sc">$</span>Sex <span class="sc">==</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>Sex[df1<span class="sc">$</span>Sex <span class="sc">==</span> <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure variable is categorical</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>chicago <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df1<span class="sc">$</span>chicago)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df1<span class="sc">$</span>Sex)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>race_rv <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df1<span class="sc">$</span>race_rv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="risk-ratio-test" class="level2">
<h2 class="anchored" data-anchor-id="risk-ratio-test">Risk Ratio Test</h2>
<p>We define gender to be a potential <strong>effect modifier</strong>. Effect modifier is a variable that modifies the observed effect (math anxiety and learning achievements) differently. Evidence of effect modification is present when the crude estimate of the association (ex: odds ratio, rate ratio, risk ratio) is very close to a weighted average of group-specific estimates of the association.</p>
<section id="tma" class="level3">
<h3 class="anchored" data-anchor-id="tma">TMA</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a contingency table for TMA</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">high_tma =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  TMA_avg <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  TMA_avg <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>)) </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>df2b <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>df2g <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>contingency_tma_boy <span class="ot">&lt;-</span> <span class="fu">table</span>(df2b<span class="sc">$</span>Condition, df2b<span class="sc">$</span>high_tma)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>contingency_tma_girl <span class="ot">&lt;-</span> <span class="fu">table</span>(df2g<span class="sc">$</span>Condition, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                              df2g<span class="sc">$</span>high_tma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TMA risk ratio for boys</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">riskratio</span>(contingency_tma_boy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
       
         0  1 Total
  0     37  9    46
  1     46  8    54
  Total 83 17   100

$measure
   risk ratio with 95% C.I.
     estimate     lower    upper
  0 1.0000000        NA       NA
  1 0.7572016 0.3180603 1.802659

$p.value
   two-sided
    midp.exact fisher.exact chi.square
  0         NA           NA         NA
  1  0.5418248    0.5987288  0.5285027

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TMA risk ratio for girls</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">riskratio</span>(contingency_tma_girl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
       
          0  1 Total
  0      55 10    65
  1      58  6    64
  Total 113 16   129

$measure
   risk ratio with 95% C.I.
    estimate     lower    upper
  0 1.000000        NA       NA
  1 0.609375 0.2353276 1.577961

$p.value
   two-sided
    midp.exact fisher.exact chi.square
  0         NA           NA         NA
  1  0.3174822    0.4240573  0.3005035

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<p><span class="math display">\[RR_{boy} = 0.75\]</span> <span class="math display">\[RR_{girl} = 0.61\]</span></p>
<p>Among boys, those who received worked examples during the lessons had 0.75 times the risk of low math anxiety (<span class="math inline">\(TMA &lt; 3\)</span>), compared to those who reported high math anxiety (<span class="math inline">\(TMA \geq 3\)</span>).</p>
<p>Among girls, those who received worked examples during the lessons had 0.61 times the risk of low math anxiety (<span class="math inline">\(TMA &lt; 3\)</span>), compared to those who reported high math anxiety (<span class="math inline">\(TMA \geq 3\)</span>).</p>
</section>
<section id="accuracy" class="level3">
<h3 class="anchored" data-anchor-id="accuracy">Accuracy</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">high_acc =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  Del_OverallAcc <span class="sc">&lt;</span> <span class="fl">0.7</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  Del_OverallAcc <span class="sc">&gt;=</span> <span class="fl">0.7</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>)) </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>df2b <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>df2g <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>contingency_acc_boy <span class="ot">&lt;-</span> <span class="fu">table</span>(df2b<span class="sc">$</span>Condition, df2b<span class="sc">$</span>high_acc)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>contingency_acc_girl <span class="ot">&lt;-</span> <span class="fu">table</span>(df2g<span class="sc">$</span>Condition, </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                              df2g<span class="sc">$</span>high_acc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy risk ratio for boys</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">riskratio</span>(contingency_acc_boy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
       
         0  1 Total
  0     27 19    46
  1     31 23    54
  Total 58 42   100

$measure
   risk ratio with 95% C.I.
    estimate     lower    upper
  0 1.000000        NA       NA
  1 1.031189 0.6488933 1.638715

$p.value
   two-sided
    midp.exact fisher.exact chi.square
  0         NA           NA         NA
  1  0.8993323            1  0.8964972

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy risk ratio for girls</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">riskratio</span>(contingency_acc_girl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
       
         0  1 Total
  0     38 27    65
  1     40 24    64
  Total 78 51   129

$measure
   risk ratio with 95% C.I.
     estimate     lower    upper
  0 1.0000000        NA       NA
  1 0.9027778 0.5884196 1.385079

$p.value
   two-sided
    midp.exact fisher.exact chi.square
  0         NA           NA         NA
  1   0.644663    0.7195953  0.6390293

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<p><span class="math display">\[RR_{boy} =  0.89\]</span> <span class="math display">\[RR_{girl} = 0.90\]</span></p>
<p>Among boys, those who received worked examples during the lessons had 0.89 times the risk of low accuracy scores (<code>DelOverall_Acc</code><span class="math inline">\(&lt; 3\)</span>), compared to those who reported high accuracy score (<code>DelOverall_Acc</code><span class="math inline">\(\geq 3\)</span>).</p>
<p>Among girls, those who received worked examples during the lessons had 0.90 times the risk of low accuracy scores (<code>DelOverall_Acc</code><span class="math inline">\(&lt; 3\)</span>), compared to those who reported high accuracy score (<code>DelOverall_Acc</code><span class="math inline">\(\geq 3\)</span>).</p>
</section>
</section>
<section id="anova-test" class="level2">
<h2 class="anchored" data-anchor-id="anova-test">ANOVA Test</h2>
<p>We are interested in seeing the effect of the interaction term between <code>Condition</code> and <code>Sex</code> on <code>TMA_avg</code> and <code>DelOverall_Acc</code>. We will use two-way ANOVA test.</p>
<section id="tma-1" class="level3">
<h3 class="anchored" data-anchor-id="tma-1">TMA</h3>
<p>Proposed Anova Model: <span class="math inline">\(Y_{i,j,k} = \mu + \alpha_i, \beta_j+ \zeta_{i,j} + \epsilon_{i,j,k}\)</span></p>
<ul>
<li><span class="math inline">\(Y_{i,j,k}\)</span>: k-th observation of <code>TMA_avg</code> in the i-th level of <code>Condition</code> and j-th level of <code>Sex</code>.</li>
<li><span class="math inline">\(\mu\)</span>: Grand mean</li>
<li><span class="math inline">\(\alpha_i\)</span>: Main effect of i-th level of <code>Condition</code></li>
<li><span class="math inline">\(\beta_j\)</span>: Main effect of j-th level of <code>Sex</code></li>
<li><span class="math inline">\(\zeta_{i,j}\)</span>: Interaction effect between i-th level of <code>Condition</code> and j-th level of <code>Sex</code></li>
</ul>
<p>Proposed Hypotheses:</p>
<p><span class="math inline">\(H_0\)</span>: <span class="math inline">\(\zeta_{i,j}\)</span> for all i and j. Effect of interaction term is significant.</p>
<p><span class="math inline">\(H_1\)</span>: Null is not true.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>tma_anova <span class="ot">&lt;-</span> <span class="fu">aov</span>(TMA_avg <span class="sc">~</span> Condition <span class="sc">+</span> Sex <span class="sc">+</span> Condition <span class="sc">*</span> Sex, <span class="at">data =</span> df1)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tma_anova)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Df Sum Sq Mean Sq F value Pr(&gt;F)
Condition       1   0.52  0.5223   0.817  0.367
Sex             1   0.15  0.1477   0.231  0.631
Condition:Sex   1   0.01  0.0100   0.016  0.901
Residuals     225 143.83  0.6392               </code></pre>
</div>
</div>
<p>Result: There is not enough evidence that interaction term between <code>Condition</code> and <code>Sex</code> has an effect on <code>TMA_avg</code> (p = 901). Thus we fail to reject the null.</p>
</section>
<section id="accuracy-1" class="level3">
<h3 class="anchored" data-anchor-id="accuracy-1">Accuracy</h3>
<p>Proposed Anova Model: <span class="math inline">\(Y_{i,j,k} = \mu + \alpha_i, \beta_j+ \zeta_{i,j} + \epsilon_{i,j,k}\)</span></p>
<ul>
<li><span class="math inline">\(Y_{i,j,k}\)</span>: k-th observation of <code>DelOverall_Acc</code> in the i-th level of <code>Condition</code> and j-th level of <code>Sex</code>.</li>
<li><span class="math inline">\(\mu\)</span>: Grand mean</li>
<li><span class="math inline">\(\alpha_i\)</span>: Main effect of i-th level of <code>Condition</code></li>
<li><span class="math inline">\(\beta_j\)</span>: Main effect of j-th level of <code>Sex</code></li>
<li><span class="math inline">\(\zeta_{i,j}\)</span>: Interaction effect between i-th level of <code>Condition</code> and j-th level of <code>Sex</code></li>
</ul>
<p>Proposed Hypotheses:</p>
<p><span class="math inline">\(H_0\)</span>: <span class="math inline">\(\zeta_{i,j}\)</span> for all i and j. Effect of interaction term is significant.</p>
<p><span class="math inline">\(H_1\)</span>: Null is not true.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>acc_anova <span class="ot">&lt;-</span> <span class="fu">aov</span>(Del_OverallAcc <span class="sc">~</span> Condition <span class="sc">+</span> Sex<span class="sc">+</span> Condition <span class="sc">*</span> Sex, <span class="at">data =</span> df1)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(acc_anova)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Df Sum Sq Mean Sq F value Pr(&gt;F)
Condition       1  0.015 0.01543   0.298  0.586
Sex             1  0.010 0.01050   0.203  0.653
Condition:Sex   1  0.003 0.00273   0.053  0.819
Residuals     225 11.663 0.05184               </code></pre>
</div>
</div>
<p>Result: There is not enough evidence that interaction term between <code>Condition</code> and <code>Sex</code> has an effect on <code>Del_OverallAcc</code> (p = 901). Thus we fail to reject the null.</p>
</section>
</section>
<section id="linear-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="linear-regression-model">Linear Regression Model</h2>
<p>In this section, we will fit linear regression model to our data to predict <code>Del_OverallAcc</code> using following covariates:</p>
<ul>
<li><code>Condition</code></li>
<li><code>Sex</code></li>
<li><code>TMA_avg</code></li>
<li>Interaction term between <code>Condition</code> and <code>TMA_avg</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> Del_OverallAcc <span class="sc">~</span> Condition <span class="sc">+</span> Sex <span class="sc">+</span> TMA_avg <span class="sc">+</span> Condition<span class="sc">*</span>Sex</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>fit1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(model1, <span class="at">data =</span> df1)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = model1, data = df1)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.60409 -0.15668  0.00996  0.16433  0.42927 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      0.709528   0.051160  13.869   &lt;2e-16 ***
Condition1       0.003388   0.045325   0.075    0.940    
Sex1            -0.019351   0.043487  -0.445    0.657    
TMA_avg         -0.042157   0.018817  -2.240    0.026 *  
Condition1:Sex1  0.015065   0.060247   0.250    0.803    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2257 on 224 degrees of freedom
Multiple R-squared:  0.02431,   Adjusted R-squared:  0.00689 
F-statistic: 1.395 on 4 and 224 DF,  p-value: 0.2364</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> Del_OverallAcc <span class="sc">~</span> Condition <span class="sc">+</span> Sex <span class="sc">+</span> TMA_avg <span class="sc">+</span> pretest<span class="sc">*</span>Condition <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  race_rv <span class="sc">+</span> pretest <span class="sc">+</span> chicago <span class="sc">+</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  Condition<span class="sc">*</span>TMA_avg <span class="sc">+</span> Condition<span class="sc">*</span>TMA_avg<span class="sc">*</span>Sex</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(model2, <span class="at">data =</span> df1)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = model2, data = df1)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.39864 -0.11445  0.00785  0.11554  0.53348 

Coefficients:
                          Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              0.6767119  0.0858629   7.881 2.99e-13 ***
Condition1              -0.1012445  0.1096687  -0.923  0.35715    
Sex1                     0.0487857  0.1027295   0.475  0.63544    
TMA_avg                 -0.0763875  0.0339235  -2.252  0.02555 *  
pretest                  0.2027486  0.0383285   5.290 3.53e-07 ***
race_rv2                -0.2396806  0.0755799  -3.171  0.00178 ** 
race_rv3                 0.0354797  0.0424655   0.835  0.40455    
race_rv4                -0.0123203  0.0414862  -0.297  0.76683    
race_rv5                 0.0018080  0.0352393   0.051  0.95914    
chicago1                -0.2012602  0.0332648  -6.050 8.18e-09 ***
Condition1:pretest      -0.0719842  0.0542221  -1.328  0.18600    
Condition1:TMA_avg       0.0995638  0.0451480   2.205  0.02870 *  
Condition1:Sex1          0.0002005  0.1455717   0.001  0.99890    
Sex1:TMA_avg            -0.0156530  0.0449261  -0.348  0.72793    
Condition1:Sex1:TMA_avg -0.0382655  0.0646781  -0.592  0.55484    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1795 on 180 degrees of freedom
  (34 observations deleted due to missingness)
Multiple R-squared:  0.4284,    Adjusted R-squared:  0.3839 
F-statistic: 9.636 on 14 and 180 DF,  p-value: 8.632e-16</code></pre>
</div>
</div>
<p><code>pretest</code> and <code>chicago</code> had high p-values (&lt; 0.05). Specifically, for <code>pretest</code>, if students already knew how to do the ratio problem before the study, the accuracy was increased by 0.20. Furthermore, for <code>chicago</code>, if the students were from Chicago, then the accuracy was decreased by -0.20.</p>
<p><code>race_rv2</code> (black) also had a high, significant p-value (p &lt; 0.05). If the students identified themselves as African Americans, their accuracy scores dropped by 0.24.</p>
<p>There was not enough evidence to show that interaction term between <code>Condition</code> and <code>Sex</code> was significant. Thus we fail to reject the null.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>